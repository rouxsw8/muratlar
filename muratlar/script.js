// Dil Ã§eviri sÃ¶zlÃ¼ÄŸÃ¼
const translations = {
    'tr': {
        // Genel
        productsPageTitle: 'ÃœrÃ¼nler - Muratlar Ä°ÅŸ Makineleri',
        aboutPageTitle: 'HakkÄ±mÄ±zda - Muratlar Ä°ÅŸ Makineleri',
        contactPageTitle: 'Ä°letiÅŸim - Muratlar Ä°ÅŸ Makineleri',

        // Header
        home: 'Ana Sayfa',
        products: 'ÃœrÃ¼nler',
        about: 'HakkÄ±mÄ±zda',
        contact: 'Ä°letiÅŸim',
        currentLang: 'ğŸ‡¹ğŸ‡·',

        // Index.html
        heroTitle: 'Ä°ÅÄ°NÄ°ZE DESTEK, MAKÄ°NENÄ°ZE GÃœÃ‡',
        discoverBtnText: 'KeÅŸfet â†’',

        // Products.html
        excavatorTitle: 'EKSKAVATÃ–R',
        hidromekKawasaki: 'HIDROMEK\nKAWAZAKI',
        excavatorDesc: 'EkskavatÃ¶r makinesi toprak ve kaya iÅŸlerinde kullanÄ±lÄ±r. FirmamÄ±z makinenin Ã§alÄ±ÅŸmasÄ± iÃ§in gerekli tÃ¼m yedek parÃ§alarÄ±n teminini saÄŸlamaktadÄ±r.',
        contactBtnText: 'Ä°letiÅŸime geÃ§ â†’', // Birden fazla yerde kullanÄ±ldÄ±ÄŸÄ± iÃ§in genel bir anahtar

        backhoeLoaderTitle: 'BEKO LODER',
        backhoeLoaderDesc: 'Beko Loder makinesi Ã§eÅŸitli malzemeleri yÃ¼kleme,taÅŸÄ±ma,kazma gibi iÅŸlemlerde kullanÄ±lmaktadÄ±r. FirmamÄ±z makinenizin Ã§alÄ±ÅŸmasÄ± iÃ§in gerekli bÃ¼tÃ¼n parÃ§alarÄ± temin edebilmektedir.',

        atlasJumboTitle: 'ATLAS JUMBO',
        atlasJumboDesc: 'Atlas Jumbo en iyi sondaj makinelerinden biri olarak karÅŸÄ±mÄ±za Ã§Ä±kar. Yer altÄ± aÃ§ma iÅŸlemlerinde yÃ¼ksek verimlilik sunduÄŸu iÃ§in kullanÄ±lÄ±r. FirmamÄ±z makinenizin Ã§alÄ±ÅŸmasÄ± iÃ§in gerekli olan malzemelerin en kalitelisini ve en ucuzunu temin edebilmektedir.',


        // About.html (Services)
        servicesTitle: 'HÄ°ZMETLERÄ°MÄ°Z',
        service1Title: '1',
        service1Desc: 'Makineleriniz iÃ§in gerekli yedek parÃ§anÄ±n/parÃ§alarÄ±n teminatÄ±nÄ± saÄŸlarÄ±z.',
        service2Title: '2',
        service2Desc: 'Yurt iÃ§i her yere kargo imkanÄ± ve gelip yerinde gÃ¶rme imkanÄ± saÄŸlarÄ±z.',
        service3Title: '3',
        service3Desc: 'CanlÄ± iletiÅŸim desteÄŸi saÄŸlarÄ±z.',
        service4Title: '4',
        service4Desc: 'Kaliteli, hÄ±zlÄ± ve gÃ¼venilir alÄ±ÅŸveriÅŸ deneyimi sunuyoruz.',

        // Contact.html
        contactPageTitle: 'Ä°LETÄ°ÅÄ°ME GEÃ‡Ä°N',
        workAddressTitle: 'Ä°ÅŸ Yeri Adresi',
        workAddressDesc: 'Ä°vedik OSB Melik GÃ¶kÃ§ek BulvarÄ± Halk Ä°ÅŸ Merkezi No:17/64 Yenimahalle, Ankara',
        phoneNumberTitle: 'Telefon NumarasÄ±',
        phone1: '+90 541 736 89 95',
        phone2: '+90 533 659 37 02',
        mailAddressTitle: 'Mail Adresi',
        emailAddress: 'muratlar0618@gmail.com',
        socialMediaTitle: 'Sosyal Medya',
        socialMediaHandle: '@muratlarismakineleri',

        // Footer
        footerHome: 'Ana Sayfa',
        footerProducts: 'ÃœrÃ¼nler',
        footerAbout: 'HakkÄ±mÄ±zda',
        footerContact: 'Ä°letiÅŸim',
        copyrightText: 'Â© 2025 Muratlar Ä°ÅŸ Makineleri',
        locationText: 'Ä°vedik OSB Melik GÃ¶kÃ§ek BulvarÄ± Halk Ä°ÅŸ Merkezi No:17/64 Yenimahalle,Ankara / TÃ¼rkiye',
        footerEmail: 'muratlar0618@gmail.com',
        footerPhone: '+90 541 736 89 95',
    },
    'en': {
        // General
        productsPageTitle: 'Products - Muratlar Heavy Equipment',
        aboutPageTitle: 'About Us - Muratlar Heavy Equipment',
        contactPageTitle: 'Contact - Muratlar Heavy Equipment',

        // Header
        home: 'Home',
        products: 'Products',
        about: 'About Us',
        contact: 'Contact',
        currentLang: 'ENG',

        // Index.html
        heroTitle: 'SUPPORT FOR YOUR BUSINESS, POWER FOR YOUR MACHINE',
        discoverBtnText: 'Discover â†’',

        // Products.html
        excavatorTitle: 'EXCAVATOR',
        hidromekKawasaki: 'HIDROMEK\nKAWAZAKI',
        excavatorDesc: 'Excavator machines are used for earthwork and rock operations. Our company provides all necessary spare parts for your machine to operate.',
        contactBtnText: 'Contact Us â†’',

        backhoeLoaderTitle: 'BACKHOE LOADER',
        backhoeLoaderDesc: 'Backhoe loader machines are used for various operations such as loading, transporting, and digging materials. Our company can provide all the necessary parts for your machine to operate.',

        atlasJumboTitle: 'ATLAS JUMBO',
        atlasJumboDesc: 'Atlas Jumbo stands out as one of the best drilling machines. It is used for underground excavation operations, offering high efficiency. Our company can provide the highest quality and most affordable materials required for your machine to operate.',

        // About.html (Services)
        servicesTitle: 'OUR SERVICES',
        service1Title: '1',
        service1Desc: 'We provide the necessary spare parts for your machines.',
        service2Title: '2',
        service2Desc: 'We offer shipping to anywhere in Turkey and the opportunity to see in person.',
        service3Title: '3',
        service3Desc: 'We provide live communication support.',
        service4Title: '4',
        service4Desc: 'We offer a quality, fast, and reliable shopping experience.',

        // Contact.html
        contactPageTitle: 'CONTACT US',
        workAddressTitle: 'Work Address',
        workAddressDesc: 'Ä°vedik OSB Melik GÃ¶kÃ§ek Boulevard Halk Ä°ÅŸ Merkezi No:17/64 Yenimahalle, Ankara',
        phoneNumberTitle: 'Phone Number',
        phone1: '+90 541 736 89 95',
        phone2: '+90 533 659 37 02',
        mailAddressTitle: 'Email Address',
        emailAddress: 'muratlar0618@gmail.com',
        socialMediaTitle: 'Social Media',
        socialMediaHandle: '@muratlarismakineleri',

        // Footer
        footerHome: 'Home',
        footerProducts: 'Products',
        footerAbout: 'About Us',
        footerContact: 'Contact',
        copyrightText: 'Â© 2025 Muratlar Heavy Equipment',
        locationText: 'Ä°vedik OSB Melik GÃ¶kÃ§ek Boulevard Halk Ä°ÅŸ Merkezi No:17/64 Yenimahalle, Ankara / Turkey',
        footerEmail: 'muratlar0618@gmail.com',
        footerPhone: '+90 541 736 89 95',
    }
};

let currentLang = localStorage.getItem('lang') || 'tr'; // TarayÄ±cÄ± depolamasÄ±ndan dili al, yoksa TÃ¼rkÃ§e baÅŸla

document.addEventListener('DOMContentLoaded', function() {
    const dropdown = document.querySelector('.dropdown');
    const dropbtn = document.querySelector('.dropbtn');
    const langOptions = document.querySelectorAll('.lang-option');
    const elementsToTranslate = document.querySelectorAll('[data-key]');
    const navLinks = document.querySelectorAll('.nav-link');
    const currentLangDisplay = document.querySelector('.lang.dropbtn'); // TR/ENG gÃ¶steren buton

    // Logo Ana Sayfa yÃ¶nlendirmesi
    const homeLinkLogo = document.getElementById('homeLinkLogo');
    if (homeLinkLogo) {
        homeLinkLogo.addEventListener('click', function(e) {
            e.preventDefault();
            const targetPage = 'index.html'; // Her zaman index.html'ye yÃ¶nlendir
            const newUrl = `/${targetPage}?lang=${currentLang}`; // GeÃ§erli dili URL'ye ekle
            window.location.href = newUrl;
        });
    }

    // KeÅŸfet butonu yÃ¶nlendirmesi (Index.html iÃ§in)
    const discoverBtn = document.getElementById('discoverBtn');
    if (discoverBtn) {
        discoverBtn.addEventListener('click', function(e) {
            e.preventDefault();
            const targetPage = 'products.html'; // ÃœrÃ¼nler sayfasÄ±na yÃ¶nlendir
            const newUrl = `/${targetPage}?lang=${currentLang}`;
            window.location.href = newUrl;
        });
    }

    // Navigasyon linklerinin yÃ¶nlendirmesi
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const key = link.dataset.key;
            let targetPage = '';

            switch (key) {
                case 'home': targetPage = 'index.html'; break;
                case 'products': targetPage = 'products.html'; break;
                case 'about': targetPage = 'about.html'; break;
                case 'contact': targetPage = 'contact.html'; break;
                // Footer linkleri de aynÄ± nav-link sÄ±nÄ±fÄ±nÄ± kullanÄ±yorsa buraya dÃ¼ÅŸecektir
                case 'footerHome': targetPage = 'index.html'; break;
                case 'footerProducts': targetPage = 'products.html'; break;
                case 'footerAbout': targetPage = 'about.html'; break;
                case 'footerContact': targetPage = 'contact.html'; break;
                default: targetPage = 'index.html'; // VarsayÄ±lan
            }
            const newUrl = `/${targetPage}?lang=${currentLang}`;
            window.location.href = newUrl;
        });
    });

    // Sayfa yÃ¼klendiÄŸinde URL'deki dil parametresini kontrol et
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam && translations[langParam]) {
        currentLang = langParam;
    }

    // Aktif sayfa linkini kÄ±rmÄ±zÄ± yap (Dil deÄŸiÅŸtirildiÄŸinde de Ã§alÄ±ÅŸmalÄ±)
    function setActiveNavLink() {
        const path = window.location.pathname.split('/').pop(); // "index.html" gibi dosya adÄ±nÄ± al
        let activeKey = '';

        if (path.includes('index')) activeKey = 'home';
        else if (path.includes('products')) activeKey = 'products';
        else if (path.includes('about')) activeKey = 'about';
        else if (path.includes('contact')) activeKey = 'contact';
        else activeKey = 'home'; // VarsayÄ±lan

        navLinks.forEach(link => {
            link.classList.remove('active');
            // Hem header hem footer linkleri iÃ§in kontrol
            if (link.dataset.key === activeKey) {
                link.classList.add('active');
            }
        });
    }


    // Fonksiyon: Sayfadaki tÃ¼m metinleri Ã§evir
    function translatePage(lang) {
        elementsToTranslate.forEach(element => {
            const key = element.dataset.key;
            if (translations[lang] && translations[lang][key]) {
                // <br> etiketini desteklemek iÃ§in innerHTML kullanÄ±yoruz
                if (key === 'hidromekKawasaki') { // Ã–zel durum iÃ§in
                    element.innerHTML = translations[lang][key];
                } else {
                    element.textContent = translations[lang][key];
                }
            }
        });
        currentLangDisplay.textContent = translations[lang].currentLang; // BayraÄŸÄ± gÃ¼ncelle
        document.title = translations[lang][document.title.split(' - ')[0].toLowerCase() + 'PageTitle'] || document.title; // Sayfa baÅŸlÄ±ÄŸÄ±nÄ± Ã§evir

        localStorage.setItem('lang', lang); // SeÃ§ilen dili kaydet
        updateDropdownVisibility(lang); // Dropdown menÃ¼sÃ¼ndeki TR/ENG gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ ayarla
    }

    // Fonksiyon: Dropdown menÃ¼sÃ¼ndeki TR/ENG seÃ§eneklerinin gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ ayarla
    function updateDropdownVisibility(lang) {
        langOptions.forEach(option => {
            if (option.dataset.lang === lang) {
                option.style.display = 'none'; // Aktif dili gizle
            } else {
                option.style.display = 'block'; // DiÄŸer dilleri gÃ¶ster
            }
        });
    }

    // Dropdown butona tÄ±klandÄ±ÄŸÄ±nda menÃ¼yÃ¼ aÃ§/kapat
    dropbtn.addEventListener('click', function(event) {
        event.preventDefault();
        dropdown.classList.toggle('active');
    });

    // MenÃ¼ dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda menÃ¼yÃ¼ kapat
    window.addEventListener('click', function(event) {
        if (!event.target.matches('.dropbtn') && !event.target.closest('.dropdown-content')) {
            if (dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            }
        }
    });

    // Dil seÃ§eneÄŸi tÄ±klandÄ±ÄŸÄ±nda
    langOptions.forEach(option => {
        option.addEventListener('click', function(event) {
            event.preventDefault();
            const selectedLang = this.dataset.lang;
            if (selectedLang !== currentLang) {
                currentLang = selectedLang;
                translatePage(currentLang); // SayfayÄ± yeni dile Ã§evir
                dropdown.classList.remove('active'); // MenÃ¼yÃ¼ kapat
                // Dil deÄŸiÅŸtiÄŸinde URL'yi gÃ¼ncellemeden sadece iÃ§eriÄŸi Ã§eviriyoruz
                // Sayfa geÃ§iÅŸleri zaten script.js tarafÄ±ndan yÃ¶netiliyor ve dil parametresini ekliyor.
            }
        });
    });

    // Sayfa yÃ¼klendiÄŸinde Ã§eviriyi uygula ve aktif linki ayarla
    translatePage(currentLang);
    setActiveNavLink();
});