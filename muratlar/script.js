// Dil √ßeviri s√∂zl√ºƒü√º
const translations = {
    'tr': {
        // Genel
        productsPageTitle: '√úr√ºnler - Muratlar ƒ∞≈ü Makineleri',
        aboutPageTitle: 'Hakkƒ±mƒ±zda - Muratlar ƒ∞≈ü Makineleri',
        contactPageTitle: 'ƒ∞leti≈üim - Muratlar ƒ∞≈ü Makineleri',

        // Header
        home: 'Ana Sayfa',
        products: '√úr√ºnler',
        about: 'Hakkƒ±mƒ±zda',
        contact: 'ƒ∞leti≈üim',
        currentLang: 'üáπüá∑',

        // Index.html
        heroTitle: 'ƒ∞≈ûƒ∞Nƒ∞ZE DESTEK, MAKƒ∞NENƒ∞ZE G√ú√á',
        discoverBtnText: 'Ke≈üfet ‚Üí',

        // Products.html
        excavatorTitle: 'EKSKAVAT√ñR',
        hidromekKawasaki: 'HIDROMEK\nKAWAZAKI',
        excavatorDesc: 'Ekskavat√∂r makinesi toprak ve kaya i≈ülerinde kullanƒ±lƒ±r. Firmamƒ±z makinenin √ßalƒ±≈ümasƒ± i√ßin gerekli t√ºm yedek par√ßalarƒ±n teminini saƒülamaktadƒ±r.',
        contactBtnText: 'ƒ∞leti≈üime ge√ß ‚Üí', // Birden fazla yerde kullanƒ±ldƒ±ƒüƒ± i√ßin genel bir anahtar

        backhoeLoaderTitle: 'BEKO LODER',
        backhoeLoaderDesc: 'Beko Loder makinesi √ße≈üitli malzemeleri y√ºkleme,ta≈üƒ±ma,kazma gibi i≈ülemlerde kullanƒ±lmaktadƒ±r. Firmamƒ±z makinenizin √ßalƒ±≈ümasƒ± i√ßin gerekli b√ºt√ºn par√ßalarƒ± temin edebilmektedir.',

        atlasJumboTitle: 'ATLAS JUMBO',
        atlasJumboDesc: 'Atlas Jumbo en iyi sondaj makinelerinden biri olarak kar≈üƒ±mƒ±za √ßƒ±kar. Yer altƒ± a√ßma i≈ülemlerinde y√ºksek verimlilik sunduƒüu i√ßin kullanƒ±lƒ±r. Firmamƒ±z makinenizin √ßalƒ±≈ümasƒ± i√ßin gerekli olan malzemelerin en kalitelisini ve en ucuzunu temin edebilmektedir.',


        // About.html (Services)
        servicesTitle: 'Hƒ∞ZMETLERƒ∞Mƒ∞Z',
        service1Title: '1',
        service1Desc: 'Makineleriniz i√ßin gerekli yedek par√ßanƒ±n/par√ßalarƒ±n teminatƒ±nƒ± saƒülarƒ±z.',
        service2Title: '2',
        service2Desc: 'Yurt i√ßi her yere kargo imkanƒ± ve gelip yerinde g√∂rme imkanƒ± saƒülarƒ±z.',
        service3Title: '3',
        service3Desc: 'Canlƒ± ileti≈üim desteƒüi saƒülarƒ±z.',
        service4Title: '4',
        service4Desc: 'Kaliteli, hƒ±zlƒ± ve g√ºvenilir alƒ±≈üveri≈ü deneyimi sunuyoruz.',

        // Contact.html
        contactPageTitle: 'ƒ∞LETƒ∞≈ûƒ∞ME GE√áƒ∞N',
        workAddressTitle: 'ƒ∞≈ü Yeri Adresi',
        workAddressDesc: 'ƒ∞vedik OSB Melik G√∂k√ßek Bulvarƒ± Halk ƒ∞≈ü Merkezi No:17/64 Yenimahalle, Ankara',
        phoneNumberTitle: 'Telefon Numarasƒ±',
        phone1: '+90 541 736 89 95',
        phone2: '+90 533 659 37 02',
        mailAddressTitle: 'Mail Adresi',
        emailAddress: 'muratlar0618@gmail.com',
        socialMediaTitle: 'Sosyal Medya',
        socialMediaHandle: '@muratlarismakineleri',

        // Footer
        footerHome: 'Ana Sayfa',
        footerProducts: '√úr√ºnler',
        footerAbout: 'Hakkƒ±mƒ±zda',
        footerContact: 'ƒ∞leti≈üim',
        copyrightText: '¬© 2025 Muratlar ƒ∞≈ü Makineleri',
        locationText: 'ƒ∞vedik OSB Melik G√∂k√ßek Bulvarƒ± Halk ƒ∞≈ü Merkezi No:17/64 Yenimahalle,Ankara / T√ºrkiye',
        footerEmail: 'muratlar0618@gmail.com',
        footerPhone: '+90 541 736 89 95',
    },
    'en': {
        // General
        productsPageTitle: 'Products - Muratlar Heavy Equipment',
        aboutPageTitle: 'About Us - Muratlar Heavy Equipment',
        contactPageTitle: 'Contact - Muratlar Heavy Equipment',

        // Header
        home: 'Home',
        products: 'Products',
        about: 'About Us',
        contact: 'Contact',
        currentLang: 'ENG',

        // Index.html
        heroTitle: 'SUPPORT FOR YOUR BUSINESS, POWER FOR YOUR MACHINE',
        discoverBtnText: 'Discover ‚Üí',

        // Products.html
        excavatorTitle: 'EXCAVATOR',
        hidromekKawasaki: 'HIDROMEK\nKAWAZAKI',
        excavatorDesc: 'Excavator machines are used for earthwork and rock operations. Our company provides all necessary spare parts for your machine to operate.',
        contactBtnText: 'Contact Us ‚Üí',

        backhoeLoaderTitle: 'BACKHOE LOADER',
        backhoeLoaderDesc: 'Backhoe loader machines are used for various operations such as loading, transporting, and digging materials. Our company can provide all the necessary parts for your machine to operate.',

        atlasJumboTitle: 'ATLAS JUMBO',
        atlasJumboDesc: 'Atlas Jumbo stands out as one of the best drilling machines. It is used for underground excavation operations, offering high efficiency. Our company can provide the highest quality and most affordable materials required for your machine to operate.',

        // About.html (Services)
        servicesTitle: 'OUR SERVICES',
        service1Title: '1',
        service1Desc: 'We provide the necessary spare parts for your machines.',
        service2Title: '2',
        service2Desc: 'We offer shipping to anywhere in Turkey and the opportunity to see in person.',
        service3Title: '3',
        service3Desc: 'We provide live communication support.',
        service4Title: '4',
        service4Desc: 'We offer a quality, fast, and reliable shopping experience.',

        // Contact.html
        contactPageTitle: 'CONTACT US',
        workAddressTitle: 'Work Address',
        workAddressDesc: 'ƒ∞vedik OSB Melik G√∂k√ßek Boulevard Halk ƒ∞≈ü Merkezi No:17/64 Yenimahalle, Ankara',
        phoneNumberTitle: 'Phone Number',
        phone1: '+90 541 736 89 95',
        phone2: '+90 533 659 37 02',
        mailAddressTitle: 'Email Address',
        emailAddress: 'muratlar0618@gmail.com',
        socialMediaTitle: 'Social Media',
        socialMediaHandle: '@muratlarismakineleri',

        // Footer
        footerHome: 'Home',
        footerProducts: 'Products',
        footerAbout: 'About Us',
        footerContact: 'Contact',
        copyrightText: '¬© 2025 Muratlar Heavy Equipment',
        locationText: 'ƒ∞vedik OSB Melik G√∂k√ßek Boulevard Halk ƒ∞≈ü Merkezi No:17/64 Yenimahalle, Ankara / Turkey',
        footerEmail: 'muratlar0618@gmail.com',
        footerPhone: '+90 541 736 89 95',
    }
};

let currentLang = localStorage.getItem('lang') || 'tr'; // Tarayƒ±cƒ± depolamasƒ±ndan dili al, yoksa T√ºrk√ße ba≈üla

document.addEventListener('DOMContentLoaded', function() {
    const dropdown = document.querySelector('.dropdown');
    const dropbtn = document.querySelector('.dropbtn');
    const langOptions = document.querySelectorAll('.lang-option');
    const elementsToTranslate = document.querySelectorAll('[data-key]');
    const navLinks = document.querySelectorAll('.nav-link');
    const currentLangDisplay = document.querySelector('.lang.dropbtn'); // TR/ENG g√∂steren buton

    // Logo Ana Sayfa y√∂nlendirmesi
    const homeLinkLogo = document.getElementById('homeLinkLogo');
    if (homeLinkLogo) {
        homeLinkLogo.addEventListener('click', function(e) {
            e.preventDefault();
            const targetPage = 'index.html'; // Her zaman index.html'ye y√∂nlendir
            const newUrl = `/${targetPage}?lang=${currentLang}`; // Ge√ßerli dili URL'ye ekle
            window.location.href = newUrl;
        });
    }

    // Ke≈üfet butonu y√∂nlendirmesi (Index.html i√ßin)
    const discoverBtn = document.getElementById('discoverBtn');
    if (discoverBtn) {
        discoverBtn.addEventListener('click', function(e) {
            e.preventDefault();
            const targetPage = 'products.html'; // √úr√ºnler sayfasƒ±na y√∂nlendir
            const newUrl = `/${targetPage}?lang=${currentLang}`;
            window.location.href = newUrl;
        });
    }

    // Navigasyon linklerinin y√∂nlendirmesi
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const key = link.dataset.key;
            let targetPage = '';

            switch (key) {
                case 'home': targetPage = 'index.html'; break;
                case 'products': targetPage = 'products.html'; break;
                case 'about': targetPage = 'about.html'; break;
                case 'contact': targetPage = 'contact.html'; break;
                // Footer linkleri de aynƒ± nav-link sƒ±nƒ±fƒ±nƒ± kullanƒ±yorsa buraya d√º≈üecektir
                case 'footerHome': targetPage = 'index.html'; break;
                case 'footerProducts': targetPage = 'products.html'; break;
                case 'footerAbout': targetPage = 'about.html'; break;
                case 'footerContact': targetPage = 'contact.html'; break;
                default: targetPage = 'index.html'; // Varsayƒ±lan
            }
            const newUrl = `/${targetPage}?lang=${currentLang}`;
            window.location.href = newUrl;
        });
    });

    // Sayfa y√ºklendiƒüinde URL'deki dil parametresini kontrol et
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam && translations[langParam]) {
        currentLang = langParam;
    }

    // Aktif sayfa linkini kƒ±rmƒ±zƒ± yap (Dil deƒüi≈ütirildiƒüinde de √ßalƒ±≈ümalƒ±)
    function setActiveNavLink() {
        const path = window.location.pathname.split('/').pop(); // "index.html" gibi dosya adƒ±nƒ± al
        let activeKey = '';

        if (path.includes('index')) activeKey = 'home';
        else if (path.includes('products')) activeKey = 'products';
        else if (path.includes('about')) activeKey = 'about';
        else if (path.includes('contact')) activeKey = 'contact';
        else activeKey = 'home'; // Varsayƒ±lan

        navLinks.forEach(link => {
            link.classList.remove('active');
            // Hem header hem footer linkleri i√ßin kontrol
            if (link.dataset.key === activeKey) {
                link.classList.add('active');
            }
        });
    }


    // Fonksiyon: Sayfadaki t√ºm metinleri √ßevir
    function translatePage(lang) {
        elementsToTranslate.forEach(element => {
            const key = element.dataset.key;
            if (translations[lang] && translations[lang][key]) {
                // <br> etiketini desteklemek i√ßin innerHTML kullanƒ±yoruz
                if (key === 'hidromekKawasaki') { // √ñzel durum i√ßin
                    element.innerHTML = translations[lang][key];
                } else {
                    element.textContent = translations[lang][key];
                }
            }
        });
        currentLangDisplay.textContent = translations[lang].currentLang; // Bayraƒüƒ± g√ºncelle
        document.title = translations[lang][document.title.split(' - ')[0].toLowerCase() + 'PageTitle'] || document.title; // Sayfa ba≈ülƒ±ƒüƒ±nƒ± √ßevir

        localStorage.setItem('lang', lang); // Se√ßilen dili kaydet
        updateDropdownVisibility(lang); // Dropdown men√ºs√ºndeki TR/ENG g√∂r√ºn√ºrl√ºƒü√ºn√º ayarla
    }

    // Fonksiyon: Dropdown men√ºs√ºndeki TR/ENG se√ßeneklerinin g√∂r√ºn√ºrl√ºƒü√ºn√º ayarla
    function updateDropdownVisibility(lang) {
        langOptions.forEach(option => {
            if (option.dataset.lang === lang) {
                option.style.display = 'none'; // Aktif dili gizle
            } else {
                option.style.display = 'block'; // Diƒüer dilleri g√∂ster
            }
        });
    }

    // Dropdown butona tƒ±klandƒ±ƒüƒ±nda men√ºy√º a√ß/kapat
    dropbtn.addEventListener('click', function(event) {
        event.preventDefault();
        dropdown.classList.toggle('active');
    });

    // Men√º dƒ±≈üƒ±na tƒ±klandƒ±ƒüƒ±nda men√ºy√º kapat
    window.addEventListener('click', function(event) {
        if (!event.target.matches('.dropbtn') && !event.target.closest('.dropdown-content')) {
            if (dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            }
        }
    });

    // Dil se√ßeneƒüi tƒ±klandƒ±ƒüƒ±nda
    langOptions.forEach(option => {
        option.addEventListener('click', function(event) {
            event.preventDefault();
            const selectedLang = this.dataset.lang;
            if (selectedLang !== currentLang) {
                currentLang = selectedLang;
                translatePage(currentLang); // Sayfayƒ± yeni dile √ßevir
                dropdown.classList.remove('active'); // Men√ºy√º kapat
                // Dil deƒüi≈ütiƒüinde URL'yi g√ºncellemeden sadece i√ßeriƒüi √ßeviriyoruz
                // Sayfa ge√ßi≈üleri zaten script.js tarafƒ±ndan y√∂netiliyor ve dil parametresini ekliyor.
            }
        });
    });

    // Sayfa y√ºklendiƒüinde √ßeviriyi uygula ve aktif linki ayarla
    translatePage(currentLang);
    setActiveNavLink();
});